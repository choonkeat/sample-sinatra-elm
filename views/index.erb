<!doctype html>
<%
  people = [
    { org: "alpha", name: "Alexander" },
    { org: "alpha", name: "Anthony" },
    { org: "alpha", name: "Andrew" },
    { org: "beta", name: "Brooklynn" },
    { org: "beta", name: "Bridget" },
    { org: "beta", name: "Belle" },
    { org: "beta", name: "Beatriz" },
    { org: "charlie", name: "Clara" },
    { org: "charlie", name: "Camilla" },
    { org: "charlie", name: "Celeste" },
    { org: "charlie", name: "Celine" },
  ]
%>
<html lang="en">
<head>
</head>
<body>
  <div id="elm">
  Organisation:
  <select>
    <% people.collect {|row| row[:org] }.uniq.each do |org| %>
      <option data-name="<%= org %>"><%= org.capitalize %></option>
    <% end %>
  </select>
  <select>
    <% people.each do |row| %>
      <option><%= row[:name] %></option>
    <% end %>
  </select>
  </div>
  <script src="/Main.js" charset="utf-8"></script>
  <script>
    Elm.Main.init({
      node: document.getElementById('elm'),
      flags: { people: <%= people.to_json %> }
    })
  </script>
</body>
</html>
